/*
 * App Global CSS
 * ----------------------------------------------------------------------------
 * Put style rules here that you want to apply globally. These styles are for
 * the entire app and not just one component. Additionally, this file can be
 * used as an entry point to import other CSS/Sass files to be included in the
 * output CSS.
 * For more information on global stylesheets, visit the documentation:
 * https://ionicframework.com/docs/layout/global-stylesheets
 */

/* Core CSS required for Ionic components to work properly */
@import "@ionic/angular/css/core.css";

/* Basic CSS for apps built with Ionic */
@import "@ionic/angular/css/normalize.css";
@import "@ionic/angular/css/structure.css";
@import "@ionic/angular/css/typography.css";
@import "@ionic/angular/css/display.css";

/* Optional CSS utils that can be commented out */
@import "@ionic/angular/css/padding.css";
@import "@ionic/angular/css/float-elements.css";
@import "@ionic/angular/css/text-alignment.css";
@import "@ionic/angular/css/text-transformation.css";
@import "@ionic/angular/css/flex-utils.css";

/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

/* @import "@ionic/angular/css/palettes/dark.always.css"; */
/* @import "@ionic/angular/css/palettes/dark.class.css"; */
@import '@ionic/angular/css/palettes/dark.system.css';

/**
 * Custom Theme Variables
 * -----------------------------------------------------
 * These variables can be used to customize the app themes.
 */

:root {
  --font-size-multiplier: 1;
  --font-size-base: 16px;
  
  /* Base font sizes for elements */
  --font-size-small: calc(var(--font-size-base) * 0.875);  /* 14px */
  --font-size-medium: var(--font-size-base);               /* 16px */
  --font-size-large: calc(var(--font-size-base) * 1.125);  /* 18px */
  --font-size-xl: calc(var(--font-size-base) * 1.25);      /* 20px */
  --font-size-xxl: calc(var(--font-size-base) * 1.5);      /* 24px */
}

/* Font size utility classes */
.text-small {
  font-size: var(--font-size-small) !important;
}

.text-medium {
  font-size: var(--font-size-medium) !important;
}

.text-large {
  font-size: var(--font-size-large) !important;
}

/* Apply font sizes based on the multiplier */
body {
  font-size: calc(var(--font-size-medium) * var(--font-size-multiplier));
}

ion-title {
  font-size: calc(var(--font-size-xl) * var(--font-size-multiplier)) !important;
}

ion-label, ion-item, p, span, div, button {
  font-size: inherit;
}

ion-card-title {
  font-size: calc(var(--font-size-xl) * var(--font-size-multiplier)) !important;
}

ion-card-subtitle {
  font-size: calc(var(--font-size-small) * var(--font-size-multiplier)) !important;
}

/* Light theme (default) */
.light-theme {
  --ion-background-color: #ffffff;
  --ion-background-color-rgb: 255, 255, 255;
  --ion-text-color: #121212;
  --ion-text-color-rgb: 18, 18, 18;
  --ion-color-step-50: #f2f2f2;
  --ion-color-step-100: #e6e6e6;
  --ion-color-step-150: #d9d9d9;
  --ion-color-step-200: #cccccc;
  --ion-color-step-250: #bfbfbf;
  --ion-color-step-300: #b3b3b3;
  --ion-color-step-350: #a6a6a6;
  --ion-color-step-400: #999999;
  --ion-color-step-450: #8c8c8c;
  --ion-color-step-500: #808080;
  --ion-color-step-550: #737373;
  --ion-color-step-600: #666666;
  --ion-color-step-650: #595959;
  --ion-color-step-700: #4d4d4d;
  --ion-color-step-750: #404040;
  --ion-color-step-800: #333333;
  --ion-color-step-850: #262626;
  --ion-color-step-900: #191919;
  --ion-color-step-950: #0d0d0d;
  
  --ion-item-background: #ffffff;
  --ion-card-background: #ffffff;
  --ion-toolbar-background: var(--ion-color-primary);
  --ion-toolbar-color: #ffffff;
  
  --beige-background: #f5f5dc;
  --text-dark: #2f3640;
  --card-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
}

/* Dark theme */
.dark-theme {
  --ion-background-color: #121212;
  --ion-background-color-rgb: 18, 18, 18;
  --ion-text-color: #ffffff;
  --ion-text-color-rgb: 255, 255, 255;
  --ion-color-step-50: #1e1e1e;
  --ion-color-step-100: #2a2a2a;
  --ion-color-step-150: #363636;
  --ion-color-step-200: #414141;
  --ion-color-step-250: #4d4d4d;
  --ion-color-step-300: #595959;
  --ion-color-step-350: #656565;
  --ion-color-step-400: #717171;
  --ion-color-step-450: #7d7d7d;
  --ion-color-step-500: #898989;
  --ion-color-step-550: #949494;
  --ion-color-step-600: #a0a0a0;
  --ion-color-step-650: #acacac;
  --ion-color-step-700: #b8b8b8;
  --ion-color-step-750: #c4c4c4;
  --ion-color-step-800: #d0d0d0;
  --ion-color-step-850: #dbdbdb;
  --ion-color-step-900: #e7e7e7;
  --ion-color-step-950: #f3f3f3;
  
  --ion-item-background: #1e1e1e;
  --ion-card-background: #1e1e1e;
  --ion-toolbar-background: #0f0f0f;
  --ion-toolbar-color: #ffffff;
  
  --beige-background: #1a1a1a;
  --text-dark: #f5f5f5;
  --card-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
  
  ion-card {
    background: #1e1e1e;
  }
  
  ion-item {
    --background: #1e1e1e;
    --color: #ffffff;
  }
  
  ion-content {
    --background: #121212;
  }
  
  .alert-banner {
    background: rgba(255, 107, 129, 0.1);
  }
  
  .footer-tabs {
    background-color: #1a1a1a;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
  }
}

/* Completely hide any instance of in-app-video-container */
body div#in-app-video-container,
body div.in-app-video-container,
div#in-app-video-container,
div.in-app-video-container,
#in-app-video-container,
.in-app-video-container,
*[id="in-app-video-container"],
*[class="in-app-video-container"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  width: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  position: absolute !important;
  top: -9999px !important;
  left: -9999px !important;
  z-index: -9999 !important;
  background-color: transparent !important;
  min-height: 0 !important;
  max-height: 0 !important;
}

/* Video popup styling - make it more robust and bigger */
.video-player-alert {
  --width: 95% !important;
  --max-width: 800px !important; 
  --max-height: 80% !important;
  --border-radius: 16px !important;
  --backdrop-opacity: 0.9 !important;
  --box-shadow: 0 20px 40px rgba(0,0,0,0.25) !important;
}

.video-player-alert .alert-head {
  text-align: center !important;
  border-bottom: 1px solid rgba(0,0,0,0.15) !important;
  padding: 12px 16px !important;
  background: rgba(0,0,0,0.02) !important;
}

.video-player-alert .alert-title {
  font-size: 18px !important;
  font-weight: 600 !important;
}

.video-player-alert .alert-message {
  padding: 0 !important;
  margin: 0 !important;
  overflow: hidden !important;
  display: block !important;
  width: 100% !important;
}

.video-player-alert .alert-message .popup-video-container {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.video-player-alert .alert-button-group {
  justify-content: space-between !important;
  padding: 12px 16px !important;
  border-top: 1px solid rgba(0,0,0,0.15) !important;
}

.popup-video-container {
  position: relative !important;
  width: 100% !important;
  padding-bottom: 56.25% !important; /* 16:9 aspect ratio */
  height: 0 !important;
  overflow: hidden !important;
  background-color: #000 !important;
  margin: 0 !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.popup-video-container iframe {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  border: none !important;
  border-radius: 0 !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Darkmode support for the video player */
.dark-theme .video-player-alert .alert-head {
  background: rgba(255,255,255,0.05) !important;
  border-bottom: 1px solid rgba(255,255,255,0.1) !important;
}

.dark-theme .video-player-alert .alert-button-group {
  border-top: 1px solid rgba(255,255,255,0.1) !important;
}

/* Fix for menu content being hidden behind header */
ion-menu ion-content {
  --padding-top: 0 !important;
}

/* Profile and avatar fixes */
ion-avatar {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  overflow: hidden !important;
  border-radius: 50% !important;
  background-color: #f5f5f5 !important; /* Light background for empty avatars */
  
  img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    border-radius: 50% !important;
  }
  
  /* Default user icon for empty avatar */
  &:empty::after {
    content: "";
    width: 70%;
    height: 70%;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 448 512'%3E%3Cpath fill='%2374C0FC' d='M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z'/%3E%3C/svg%3E");
    background-position: center;
    background-repeat: no-repeat;
    background-size: contain;
  }
}

/* Simple fixes for menu visibility - non-intrusive */
ion-menu ion-item {
  cursor: pointer !important;
}

/* Remove problematic styles */
/* Fix for profile and menu navigation issues */
/*
ion-content {
  --padding-top: 16px !important;
}
*/

/* Ensure content doesn't hide under header */
/*
ion-header {
  z-index: 10 !important;
}

.ion-page {
  display: flex !important;
  flex-direction: column !important;
}
*/

/* Global dropdown styling - ensures menus are always visible */
/*
.dropdown-menu,
.user-dropdown,
ion-popover,
ion-action-sheet {
  z-index: 99999 !important;
  position: absolute !important;
}
*/

/* Fix for footer tabs to ensure they're always visible at the bottom */
/*
.footer-tabs,
ion-tab-bar,
ion-tabs {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 1000 !important;
}
*/

/* Ensure proper padding for content to prevent hiding under headers or footers */
/*
ion-content {
  --padding-bottom: 70px !important;
}
*/

/* Higher z-index for all headers */
/*
ion-header {
  z-index: 1001 !important;
  position: relative !important;
}
*/

/* Remove the recently added dark theme improvements that affect the main content */
:root {
  &.dark-theme, &[data-theme="dark"] {
    /* Remove styles that affect the main content - keep only sidebar styles */
    ion-menu {
      --background: #1e1e1e !important;
      --ion-background-color: #1e1e1e !important;
      
      ion-content {
        --background: #1e1e1e !important;
      }
      
      ion-item {
        --background: #1e1e1e !important;
        --color: #ffffff !important;
        
        &.selected {
          --background: #2d2d2d !important;
          --color: var(--ion-color-primary) !important;
        }
        
        ion-icon {
          color: #ffffff !important;
        }
      }
      
      ion-toolbar {
        --background: #121212 !important;
      }
    }
  }
}

/* Keep the dark theme fixes for sidebar only */
:root.dark-theme, .dark-theme {
  ion-menu {
    --background: #1e1e1e !important;
    --ion-background-color: #1e1e1e !important;
    
    ion-header ion-toolbar {
      --background: var(--ion-color-primary) !important;
    }
    
    ion-content {
      --background: #1e1e1e !important;
    }
    
    ion-list {
      background: #1e1e1e !important;
    }
    
    ion-item {
      --background: #1e1e1e !important;
      --color: #ffffff !important;
      --border-color: rgba(255, 255, 255, 0.1) !important;
      
      ion-icon {
        color: #ffffff !important;
      }
      
      &.selected {
        --background: rgba(var(--ion-color-primary-rgb), 0.2) !important;
        --color: var(--ion-color-primary-contrast) !important;
      }
    }
  }
}
